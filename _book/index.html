<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Aula 5</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.27.3 and GitBook 2.6.7" />

  <meta property="og:title" content="Aula 5" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Aula 5" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Pedro Leite" />


<meta name="date" content="2022-07-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="trabalhando-em-ambiente-de-projetos.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Aula 5</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Pipes</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#origem-do-pipe"><i class="fa fa-check"></i><b>1.1</b> Origem do Pipe</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#pacote-magrittr"><i class="fa fa-check"></i><b>1.2</b> Pacote magrittr</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#antes-do-pipe"><i class="fa fa-check"></i><b>1.3</b> Antes do pipe</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#etapas-intermediárias"><i class="fa fa-check"></i><b>1.3.1</b> Etapas intermediárias</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#subtituição-da-base-original"><i class="fa fa-check"></i><b>1.3.2</b> Subtituição da base original</a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#criação-de-função"><i class="fa fa-check"></i><b>1.3.3</b> Criação de função</a></li>
<li class="chapter" data-level="1.3.4" data-path="index.html"><a href="index.html#uso-do-pipe"><i class="fa fa-check"></i><b>1.3.4</b> Uso do pipe</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#maneiras-de-utilizar-o-pipe"><i class="fa fa-check"></i><b>1.4</b> Maneiras de utilizar o pipe</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#piping-básico"><i class="fa fa-check"></i><b>1.4.1</b> Piping básico</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#o-marcador-de-posição-do-argumento"><i class="fa fa-check"></i><b>1.4.2</b> O marcador de posição do argumento</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#reutilizando-o-espaço-reservado-para-atributos"><i class="fa fa-check"></i><b>1.4.3</b> Reutilizando o espaço reservado para atributos</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#construir-funções"><i class="fa fa-check"></i><b>1.4.4</b> Construir funções</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#pipe-com-exposição-de-variáveis"><i class="fa fa-check"></i><b>1.4.5</b> Pipe com exposição de variáveis</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#estilo-de-programação"><i class="fa fa-check"></i><b>1.5</b> Estilo de programação</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#pipes-e-estilo-de-programação"><i class="fa fa-check"></i><b>1.5.1</b> Pipes e estilo de programação</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#atribuição"><i class="fa fa-check"></i><b>1.5.2</b> Atribuição</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="trabalhando-em-ambiente-de-projetos.html"><a href="trabalhando-em-ambiente-de-projetos.html"><i class="fa fa-check"></i><b>2</b> Trabalhando em ambiente de projetos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="trabalhando-em-ambiente-de-projetos.html"><a href="trabalhando-em-ambiente-de-projetos.html#criando-um-projeto-no-r"><i class="fa fa-check"></i><b>2.1</b> Criando um projeto no R</a></li>
<li class="chapter" data-level="2.2" data-path="trabalhando-em-ambiente-de-projetos.html"><a href="trabalhando-em-ambiente-de-projetos.html#organizando-seu-projeto"><i class="fa fa-check"></i><b>2.2</b> Organizando seu projeto</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Aula 5</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Aula 5</h1>
<p class="author"><em>Pedro Leite</em></p>
<p class="date"><em>2022-07-18</em></p>
</div>
<div id="pipes" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Capítulo 1</span> Pipes<a href="index.html#pipes" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><img src="figuras/ceci_pipe.jpg" width="362" style="display: block; margin: auto;" /></p>
<div id="origem-do-pipe" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Origem do Pipe<a href="index.html#origem-do-pipe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>O conceito de <em>pipe</em> existe pelo menos desde os anos 1970, quando Douglas McIlroy originalmente propôs os pipelines no Unix. O operador tinha o objetivo de simplificar comandos cujos resultados deveriam ser passados para outros comandos.</p>
<p>Por essa descrição já conseguimos ter uma ideia de onde vem o seu nome: pipe em inglês significa “cano”, referindo-se ao transporte das saídas dos comandos. Em portugês o termo é traduzido como “canalização” ou “encadeamento”, mas no dia-a-dia é mais comum usar o termo em inglês.</p>
<p>A partir daí o pipe tem aparecido nas mais diversas aplicações, desde HTML até o R. Ele pode ter várias aparências, mas o seu objetivo é sempre o mesmo: transportar resultados.</p>
<p>No R o pipe tem um símbolo um pouco estranho (%&gt;%), mas no fundo ele não passa de uma função infixa, ou seja, uma função que aparece entre os seus argumentos (como a + b ou a %in% b). Na verdade é por isso mesmo que ele tem porcentagens antes e depois: porque no R uma função infixa só pode ser declarada assim, entre parêntesis.</p>
</div>
<div id="pacote-magrittr" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Pacote magrittr<a href="index.html#pacote-magrittr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="figuras/logo.png" width="105" style="display: block; margin: auto;" /></p>
<p>O pacote <em>magrittr</em> fornece um conjunto de operadores que tornam seu código mais fácil de ler.</p>
<p>Por quê?</p>
<ul>
<li>Cria sequências estruturais de operações (pipelines ou “encanamentos”) da esquerda para a direita (em vez de dentro pra fora);</li>
<li>evita chamar funções aninhadas;</li>
<li>minimiza a necessidade de variáveis locais e definição de funções;</li>
<li>torna mais fácil adicionar etapas em qualquer local da sequência de operações.</li>
</ul>
<p>Os pipes conectam os valores da esquerda em expressões que aparecem do lado direito, i.e. podemos substituir <code>f(x)</code> com <code>x %&gt;% f()</code>, onde <code>%&gt;%</code> é o operador pipe.</p>
<p>Vamos começar demonstrando sua funcionalidade básica. Carregue o pacote magrittr e declare o pipe usando Ctrl + Shift + M.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="index.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-2"><a href="index.html#cb1-2" aria-hidden="true" tabindex="-1"></a>mais_tres <span class="ot">&lt;-</span> <span class="cf">function</span>(x) { x <span class="sc">+</span> <span class="dv">3</span> }</span>
<span id="cb1-3"><a href="index.html#cb1-3" aria-hidden="true" tabindex="-1"></a>sobre_dois <span class="ot">&lt;-</span> <span class="cf">function</span>(x) { x <span class="sc">/</span> <span class="dv">2</span> }</span>
<span id="cb1-4"><a href="index.html#cb1-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb1-5"><a href="index.html#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="index.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sobre_dois</span>(<span class="fu">mais_tres</span>(x))</span></code></pre></div>
<pre><code>## [1] 2.0 2.5 3.0</code></pre>
<p>Perceba como fica difícil de entender o que está acontecendo primeiro? A linha
relevante começa com a divisão por 2, depois vem a soma com 3 e, por fim, os
valores de entrada.</p>
<p>É muito mais legível quando as funções são exibidas na ordem em que serão aplicadas.</p>
<p>Isso pode ser realizado se tivermos uma função que passa o resultado do que
está à sua esquerda para a função que está à sua direita:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="index.html#cb3-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">mais_tres</span>() <span class="sc">%&gt;%</span> <span class="fu">sobre_dois</span>()</span></code></pre></div>
<p>Ao juntar diversas funções com o pipe, o benefício torna-se mais aparente.
Considere o exemplo abaixo:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="index.html#cb4-1" aria-hidden="true" tabindex="-1"></a>clima <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="index.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(origem <span class="sc">%in%</span> <span class="st">&#39;JFK&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="index.html#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temp_celsius =</span> (temperatura <span class="sc">-</span> <span class="dv">32</span>) <span class="sc">*</span> <span class="dv">5</span><span class="sc">/</span><span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="index.html#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 16
##   origem   ano   mes   dia  hora temperatura ponto_condensacao umidade
##   &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;       &lt;dbl&gt;             &lt;dbl&gt;   &lt;dbl&gt;
## 1 JFK     2013     1     1     1        39.0              26.1    59.4
## 2 JFK     2013     1     1     2        39.0              26.1    59.4
## 3 JFK     2013     1     1     3        39.9              27.0    59.5
## 4 JFK     2013     1     1     4        39.9              28.0    62.2
## 5 JFK     2013     1     1     5        39.0              27.0    61.6
## # … with 8 more variables: direcao_vento &lt;dbl&gt;, velocidade_vento &lt;dbl&gt;,
## #   velocidade_rajada &lt;dbl&gt;, precipitacao &lt;dbl&gt;, pressao &lt;dbl&gt;,
## #   visibilidade &lt;dbl&gt;, data_hora &lt;dttm&gt;, temp_celsius &lt;dbl&gt;</code></pre>
<p>Quatro operações são realizadas para chegar ao conjunto de dados desejado, e
elas são escritas em uma ordem natural: a mesma ordem de sua execução. Além
disso, nenhuma variável temporária é necessária. Se necessitarmos de mais
uma operação, é fácil incluí-la na sequência de operações, em qualquer local
necessário.</p>
</div>
<div id="antes-do-pipe" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Antes do pipe<a href="index.html#antes-do-pipe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Como as pessoas escreviam seus códigos antes do pipe?</p>
<p>Usando o pacote <code>pinguins</code>, calcule a média da massa corporal dos pinguins da
espécie “Pinguim-de-adélia” em diferentes ilhas.</p>
<p>Primeiro, vamos ler nossa base e visualizá-la:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="index.html#cb6-1" aria-hidden="true" tabindex="-1"></a>pinguins</span></code></pre></div>
<pre><code>## # A tibble: 344 × 8
##    especie           ilha     comprimento_bico profundidade_bi… comprimento_nad…
##    &lt;fct&gt;             &lt;fct&gt;               &lt;dbl&gt;            &lt;dbl&gt;            &lt;int&gt;
##  1 Pinguim-de-adélia Torgers…             39.1             18.7              181
##  2 Pinguim-de-adélia Torgers…             39.5             17.4              186
##  3 Pinguim-de-adélia Torgers…             40.3             18                195
##  4 Pinguim-de-adélia Torgers…             NA               NA                 NA
##  5 Pinguim-de-adélia Torgers…             36.7             19.3              193
##  6 Pinguim-de-adélia Torgers…             39.3             20.6              190
##  7 Pinguim-de-adélia Torgers…             38.9             17.8              181
##  8 Pinguim-de-adélia Torgers…             39.2             19.6              195
##  9 Pinguim-de-adélia Torgers…             34.1             18.1              193
## 10 Pinguim-de-adélia Torgers…             42               20.2              190
## # … with 334 more rows, and 3 more variables: massa_corporal &lt;int&gt;, sexo &lt;fct&gt;,
## #   ano &lt;int&gt;</code></pre>
<p>Podemos decompor nosso problema em uma séria de etapas:</p>
<ul>
<li>Filtrar pinguins para manter as observações da espécia “Adélia”.</li>
<li>Agrupar os pinguins filtrados por ilha.</li>
<li>Sumarizar os pinguins agrupados e filtrados calculando a média da massa
corporal.</li>
</ul>
<p>Mas como implementamos esse código?</p>
<div id="etapas-intermediárias" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Etapas intermediárias<a href="index.html#etapas-intermediárias" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Uma opção é salvar cada etapa como um novo objeto:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="index.html#cb8-1" aria-hidden="true" tabindex="-1"></a>pinguins_1 <span class="ot">&lt;-</span> <span class="fu">filter</span>(pinguins, especie <span class="sc">%in%</span> <span class="st">&quot;Pinguim-de-adélia&quot;</span>)</span>
<span id="cb8-2"><a href="index.html#cb8-2" aria-hidden="true" tabindex="-1"></a>pinguins_2 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(pinguins_1, ilha)</span>
<span id="cb8-3"><a href="index.html#cb8-3" aria-hidden="true" tabindex="-1"></a>(pinguins_3 <span class="ot">&lt;-</span> <span class="fu">summarise</span>(pinguins_2, <span class="at">media_mc =</span> <span class="fu">mean</span>(massa_corporal, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   ilha      media_mc
##   &lt;fct&gt;        &lt;dbl&gt;
## 1 Biscoe       3710.
## 2 Dream        3688.
## 3 Torgersen    3706.</code></pre>
<p>Por que não gostamos de fazer isso?</p>
<ul>
<li>Precisamos nomear cada objeto intermediário.</li>
<li>Aqui criamos um número como sufixo do nome do objeto, o que não é um bom método de auto documentação.</li>
<li>O que esperamos encontrar em penguins_2? Seria mais interessante um nome mais informativo, no entanto não temos um.</li>
<li>Temos que lembrar como cada base existe em cada etapa intermediária e lembrar de referenciar a correta. O que acontece se identificarmos a base errada?</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="index.html#cb10-1" aria-hidden="true" tabindex="-1"></a>pinguins_1 <span class="ot">&lt;-</span> <span class="fu">filter</span>(pinguins, especie <span class="sc">==</span> <span class="st">&quot;Pinguim-de-adélia&quot;</span>)</span>
<span id="cb10-2"><a href="index.html#cb10-2" aria-hidden="true" tabindex="-1"></a>pinguins_2 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(pinguins_1, ilha)</span>
<span id="cb10-3"><a href="index.html#cb10-3" aria-hidden="true" tabindex="-1"></a>(pinguins_3 <span class="ot">&lt;-</span> <span class="fu">summarise</span>(pinguins_1, <span class="at">media_mc =</span> <span class="fu">mean</span>(massa_corporal, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   media_mc
##      &lt;dbl&gt;
## 1    3701.</code></pre>
<p>Não obtemos a resposta correta. Pior, não temos uma mensagem de um erro
explícita porque o código funciona. O R executa o comando no entanto não sabe
nos alertar que usamos a base errada.</p>
</div>
<div id="subtituição-da-base-original" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Subtituição da base original<a href="index.html#subtituição-da-base-original" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Em vez de criar objetos intermediários, vamos substituir a base original com sua modificação.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="index.html#cb12-1" aria-hidden="true" tabindex="-1"></a>pinguins <span class="ot">&lt;-</span> <span class="fu">filter</span>(pinguins, especie <span class="sc">==</span> <span class="st">&quot;Pinguim-de-adélia&quot;</span>)</span>
<span id="cb12-2"><a href="index.html#cb12-2" aria-hidden="true" tabindex="-1"></a>pinguins <span class="ot">&lt;-</span> <span class="fu">group_by</span>(pinguins, ilha)</span>
<span id="cb12-3"><a href="index.html#cb12-3" aria-hidden="true" tabindex="-1"></a>(pinguins <span class="ot">&lt;-</span> <span class="fu">summarise</span>(pinguins, <span class="at">media_mc =</span> <span class="fu">mean</span>(massa_corporal, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   ilha      media_mc
##   &lt;fct&gt;        &lt;dbl&gt;
## 1 Biscoe       3710.
## 2 Dream        3688.
## 3 Torgersen    3706.</code></pre>
<p>Isso funciona, mas ainda apresenta alguns problemas.</p>
<ul>
<li>O que acontece se cometermos um erro no meio da operação? Teremos que rodar
toda a operação desde a leitura da base original.</li>
</ul>
</div>
<div id="criação-de-função" class="section level3 hasAnchor" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Criação de função<a href="index.html#criação-de-função" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Podemos criar uma função agrupando todas as funções em um único objeto e</p>
<p>We could string all the function calls together into a single object and forget assigning it anywhere.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="index.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(pinguins)</span>
<span id="cb14-2"><a href="index.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb14-3"><a href="index.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb14-4"><a href="index.html#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb14-5"><a href="index.html#cb14-5" aria-hidden="true" tabindex="-1"></a>      pinguins,</span>
<span id="cb14-6"><a href="index.html#cb14-6" aria-hidden="true" tabindex="-1"></a>      especie<span class="sc">==</span> <span class="st">&quot;Pinguim-de-adélia&quot;</span></span>
<span id="cb14-7"><a href="index.html#cb14-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb14-8"><a href="index.html#cb14-8" aria-hidden="true" tabindex="-1"></a>    ilha</span>
<span id="cb14-9"><a href="index.html#cb14-9" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb14-10"><a href="index.html#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">media_mc =</span> <span class="fu">mean</span>(massa_corporal, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-11"><a href="index.html#cb14-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   ilha      media_mc
##   &lt;fct&gt;        &lt;dbl&gt;
## 1 Biscoe       3710.
## 2 Dream        3688.
## 3 Torgersen    3706.</code></pre>
<p>Agora temos que ler a função de dentro para fora. Isso não é intuitivo.</p>
</div>
<div id="uso-do-pipe" class="section level3 hasAnchor" number="1.3.4">
<h3><span class="header-section-number">1.3.4</span> Uso do pipe<a href="index.html#uso-do-pipe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="index.html#cb16-1" aria-hidden="true" tabindex="-1"></a>pinguins <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="index.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(especie <span class="sc">==</span> <span class="st">&quot;Pinguim-de-adélia&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="index.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ilha) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="index.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">media_mc =</span> <span class="fu">mean</span>(massa_corporal, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   ilha      media_mc
##   &lt;fct&gt;        &lt;dbl&gt;
## 1 Biscoe       3710.
## 2 Dream        3688.
## 3 Torgersen    3706.</code></pre>
<p>Utilização de pipe é a sintaxe mais clara para de se implementar, porque foca em ações e não objetos.</p>
<p>Hadley diz: “[I]t focuses on verbs, not nouns.”</p>
<p>Foca em verbos, e não em substantivos.</p>
<p>O pipe automaticamente passa o output (saída) da primeira linha como (entrada) da linha seguinte.</p>
<p>Por isso, as funções do tidyverse sempre aceitam um data frame como o primeiro argumento.</p>
</div>
</div>
<div id="maneiras-de-utilizar-o-pipe" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Maneiras de utilizar o pipe<a href="index.html#maneiras-de-utilizar-o-pipe" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="piping-básico" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Piping básico<a href="index.html#piping-básico" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>x %&gt;% f</code> é equivalente a <code>f(x)</code></li>
<li><code>x %&gt;% f(y)</code> é equivalente a <code>f(x, y)</code></li>
<li><code>x %&gt;% f %&gt;% g %&gt;% h</code> é equivalente a <code>h(g(f(x)))</code></li>
</ul>
</div>
<div id="o-marcador-de-posição-do-argumento" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> O marcador de posição do argumento<a href="index.html#o-marcador-de-posição-do-argumento" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>x %&gt;% f(y, .)</code> é equivalente a <code>f(y, x)</code></li>
<li><code>x %&gt;% f(y, z = .)</code> é equivalente a <code>f(y, z = x)</code></li>
</ul>
</div>
<div id="reutilizando-o-espaço-reservado-para-atributos" class="section level3 hasAnchor" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Reutilizando o espaço reservado para atributos<a href="index.html#reutilizando-o-espaço-reservado-para-atributos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>É simples usar o espaço reservado várias vezes em uma expressão do lado
direito. No entanto, quando o espaço reservado só aparece em expressões
aninhadas, o magrittr ainda aplicará a regra do primeiro argumento. A razão
é que, na maioria dos casos, isso resulta em um código mais limpo.</p>
<p><code>x %&gt;% f(y = nrow(.), z = ncol(.))</code> é equivalente a
<code>f(x, y = nrow(x), z = ncol(x))</code></p>
<p>O comportamento pode ser anulado colocando o lado direito entre chaves:</p>
<p><code>x %&gt;% {f(y = nrow(.), z = ncol(.))}</code> é equivalente a
<code>f(y = nrow(x), z = ncol(x))</code></p>
</div>
<div id="construir-funções" class="section level3 hasAnchor" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> Construir funções<a href="index.html#construir-funções" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Qualquer pipeline que comece com <code>.</code> retornará uma função que pode ser usada posteriormente para aplicar o pipeline a valores. A construção de funções em magrittr é, portanto, semelhante à construção de outros valores.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="index.html#cb18-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> . <span class="sc">%&gt;%</span> cos <span class="sc">%&gt;%</span> sin </span>
<span id="cb18-2"><a href="index.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># é equivalente a</span></span>
<span id="cb18-3"><a href="index.html#cb18-3" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(.) <span class="fu">sin</span>(<span class="fu">cos</span>(.)) </span></code></pre></div>
</div>
<div id="pipe-com-exposição-de-variáveis" class="section level3 hasAnchor" number="1.4.5">
<h3><span class="header-section-number">1.4.5</span> Pipe com exposição de variáveis<a href="index.html#pipe-com-exposição-de-variáveis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Muitas funções aceitam um argumento de dados, por exemplo. <code>lm</code> e <code>aggregate</code>,
que é muito útil em um pipeline onde os dados são processados primeiro e depois
passados para tal função. Existem também funções que não possuem argumento de
dados, para as quais é útil expor as variáveis nos dados. Isso é feito com o
operador <code>%$%</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="index.html#cb19-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="index.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(Sepal.Length <span class="sc">&gt;</span> <span class="fu">mean</span>(Sepal.Length)) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="index.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(Sepal.Length, Sepal.Width)</span></code></pre></div>
<pre><code>## Error in pmatch(use, c(&quot;all.obs&quot;, &quot;complete.obs&quot;, &quot;pairwise.complete.obs&quot;, : object &#39;Sepal.Width&#39; not found</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="index.html#cb21-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="index.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(Sepal.Length <span class="sc">&gt;</span> <span class="fu">mean</span>(Sepal.Length)) <span class="sc">%$%</span></span>
<span id="cb21-3"><a href="index.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(Sepal.Length, Sepal.Width)</span></code></pre></div>
<pre><code>## [1] 0.3361992</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="index.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">z =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)) <span class="sc">%$%</span></span>
<span id="cb23-2"><a href="index.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ts.plot</span>(z)</span></code></pre></div>
<p><img src="_main_files/figure-html/exposition-1.png" width="672" /></p>
</div>
</div>
<div id="estilo-de-programação" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Estilo de programação<a href="index.html#estilo-de-programação" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Recomendações do próprio Hadley Wickham no livro: <a href="https://style.tidyverse.org/pipes.html">The tidyverse style guide</a></p>
<p>Um bom estilo de programação é comparável a uma pontuação correta: você pode
entender o texto sem ela,
noentantoelatornaascoisasmuitosmaisfáceisdeseremlidas.</p>
<p>Todos os guias de estilo são fudamentalmente opinativos. Algumas decisões
tornam programar genuinamente mais fácil (especialmente quando correspondemos
recuos com a estrutura), mas muitas decisões são arbitrárias. O mais importante
em um guideline de estilo é que ele fornece consistência, tornando a
programação mais fácil de escrever porque você precisa tomar menos decisões.</p>
<p>Dois pacotes de R suportam esse estilo:</p>
<ul>
<li><p><a href="http://styler.r-lib.org">styler</a> permite que você corrija
interativamente o estilo de um texto selecionado, arquivos, ou projetos
inteiros. Ele inclui um add-in no RStudio, a forma mais fácil de
re-estilizar um código existente.</p>
<p><img src="figuras/styler-addin.png" width="250" style="display: block; margin: auto;" /></p></li>
<li><p><a href="https://github.com/jimhester/lintr">lintr</a> realiza checagens
automáticas para confirmar que o seu código está conforme o estilo.</p></li>
</ul>
<div id="pipes-e-estilo-de-programação" class="section level3 hasAnchor" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Pipes e estilo de programação<a href="index.html#pipes-e-estilo-de-programação" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Utilize <code>%&gt;%</code> para enfatizar a sequência de ações, em vez do objeto nos quais estão sendo realizadas.</p>
<p>Evite utilizar o pipe quando:</p>
<ul>
<li><p>Você precisa manipular mais de um objeto ao mesmo tempo. Limite a utilização de pipes para uma sequência de etapas aplicadas a um objeto primário.</p></li>
<li><p>Existem objetos intermediários significativos que podem ser dados nomes informativos.</p></li>
</ul>
<div id="espaço-em-branco" class="section level4 hasAnchor" number="1.5.1.1">
<h4><span class="header-section-number">1.5.1.1</span> Espaço em branco<a href="index.html#espaço-em-branco" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>%&gt;%</code> deve ser sempre precedido de um espaço em branco, e sempre sucedido por uma nova linha.</p>
<p>Após a primeira etapa, cada linha deve ser indexada por dois espaços. Essa estrutura torna mais fácil a adição de novas etapas (ou rearranjar etapas existentes) e torna mais difícil de ignorar uma etapa.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="index.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bom</span></span>
<span id="cb24-2"><a href="index.html#cb24-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="index.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="index.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_if</span>(is.numeric, mean) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="index.html#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="index.html#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(measure, value, <span class="sc">-</span>Species) <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="index.html#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(value)</span>
<span id="cb24-8"><a href="index.html#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="index.html#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Ruim</span></span>
<span id="cb24-10"><a href="index.html#cb24-10" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(mean) <span class="sc">%&gt;%</span></span>
<span id="cb24-11"><a href="index.html#cb24-11" aria-hidden="true" tabindex="-1"></a>ungroup <span class="sc">%&gt;%</span> <span class="fu">gather</span>(measure, value, <span class="sc">-</span>Species) <span class="sc">%&gt;%</span></span>
<span id="cb24-12"><a href="index.html#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(value)</span></code></pre></div>
</div>
<div id="linhas-muito-longas" class="section level4 hasAnchor" number="1.5.1.2">
<h4><span class="header-section-number">1.5.1.2</span> Linhas muito longas<a href="index.html#linhas-muito-longas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se os argumentos de uma função não cabem em uma linha, coloque cada argumento
em sua própria linha e recue:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="index.html#cb25-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="index.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="index.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb25-4"><a href="index.html#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sepal.Length =</span> <span class="fu">mean</span>(Sepal.Length),</span>
<span id="cb25-5"><a href="index.html#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sepal.Width =</span> <span class="fu">mean</span>(Sepal.Width),</span>
<span id="cb25-6"><a href="index.html#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Species =</span> <span class="fu">n_distinct</span>(Species)</span>
<span id="cb25-7"><a href="index.html#cb25-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="pipes-curtos" class="section level4 hasAnchor" number="1.5.1.3">
<h4><span class="header-section-number">1.5.1.3</span> Pipes curtos<a href="index.html#pipes-curtos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Um pipe de apenas uma etapa pode permanecer em uma linha, mas a não ser que
você pretenda expandir ele posteriormente, você deve considerar reescrever seu
código como uma função.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="index.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bom</span></span>
<span id="cb26-2"><a href="index.html#cb26-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Species)</span>
<span id="cb26-3"><a href="index.html#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="index.html#cb26-4" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb26-5"><a href="index.html#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Species)</span>
<span id="cb26-6"><a href="index.html#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="index.html#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(iris, Species)</span></code></pre></div>
<p>Às vezes é útil incluir um pipe curto como um argumento de uma função em um
pipe maior. Considere cuidadosamente se o código é mais legível com um pipe
curto de uma linha ou se é melhor mover o código para fora do pipe e dar um
nome evocativo.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="index.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bom</span></span>
<span id="cb27-2"><a href="index.html#cb27-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="index.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(a, b, w) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="index.html#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(y <span class="sc">%&gt;%</span> <span class="fu">select</span>(a, b, v), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>))</span>
<span id="cb27-5"><a href="index.html#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="index.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Melhor</span></span>
<span id="cb27-7"><a href="index.html#cb27-7" aria-hidden="true" tabindex="-1"></a>x_join <span class="ot">&lt;-</span> x <span class="sc">%&gt;%</span> <span class="fu">select</span>(a, b, w)</span>
<span id="cb27-8"><a href="index.html#cb27-8" aria-hidden="true" tabindex="-1"></a>y_join <span class="ot">&lt;-</span> y <span class="sc">%&gt;%</span> <span class="fu">select</span>(a, b, v)</span>
<span id="cb27-9"><a href="index.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(x_join, y_join, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>))</span></code></pre></div>
</div>
<div id="nenhum-argumento" class="section level4 hasAnchor" number="1.5.1.4">
<h4><span class="header-section-number">1.5.1.4</span> Nenhum argumento<a href="index.html#nenhum-argumento" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>magrittr permite a omissão dos <code>()</code> em funções que não têm argumentos. Evite
isso.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="index.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bom</span></span>
<span id="cb28-2"><a href="index.html#cb28-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="index.html#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="index.html#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>()</span>
<span id="cb28-5"><a href="index.html#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="index.html#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Ruim</span></span>
<span id="cb28-7"><a href="index.html#cb28-7" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb28-8"><a href="index.html#cb28-8" aria-hidden="true" tabindex="-1"></a>  unique <span class="sc">%&gt;%</span></span>
<span id="cb28-9"><a href="index.html#cb28-9" aria-hidden="true" tabindex="-1"></a>  sort</span></code></pre></div>
</div>
</div>
<div id="atribuição" class="section level3 hasAnchor" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> Atribuição<a href="index.html#atribuição" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Existem três tipos aceitáveis de atribuição:</p>
<ul>
<li><p>Nome da variável e atribuição em linhas separadas:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="index.html#cb29-1" aria-hidden="true" tabindex="-1"></a>iris_long <span class="ot">&lt;-</span></span>
<span id="cb29-2"><a href="index.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  iris <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="index.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(measure, value, <span class="sc">-</span>Species) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="index.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>value)</span></code></pre></div></li>
<li><p>Nome da variável e atribuição na mesma linha:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="index.html#cb30-1" aria-hidden="true" tabindex="-1"></a>iris_long <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="index.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(measure, value, <span class="sc">-</span>Species) <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="index.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>value)</span></code></pre></div></li>
<li><p>Atribuição no final do pipe com <code>-&gt;</code>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="index.html#cb31-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="index.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(measure, value, <span class="sc">-</span>Species) <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="index.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>value) <span class="ot">-&gt;</span></span>
<span id="cb31-4"><a href="index.html#cb31-4" aria-hidden="true" tabindex="-1"></a>  iris_long</span></code></pre></div>
<p>Talvez seja a maneira mais natural de escrever, mas torna a
leitura mais difícil: quando o nome vem primeiro ele age como um
cabeçalho para lembrar o propósito do pipe.</p></li>
</ul>
<p>O pacote magrittr fornece o operador <code>%&lt;&gt;%</code> como um atalho para modificar um objeto. Evite esse operador.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="index.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bom</span></span>
<span id="cb32-2"><a href="index.html#cb32-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="index.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">abs</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="index.html#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>()</span>
<span id="cb32-5"><a href="index.html#cb32-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-6"><a href="index.html#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Ruim</span></span>
<span id="cb32-7"><a href="index.html#cb32-7" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&lt;&gt;%</span></span>
<span id="cb32-8"><a href="index.html#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">abs</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb32-9"><a href="index.html#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>()</span></code></pre></div>


</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="trabalhando-em-ambiente-de-projetos.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
